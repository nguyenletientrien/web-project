///////////////////////////////////////////////////////////////////
/////////////////////////MẢNG SẢN PHẨM////////////////////////////
window.data = [
    {
        "number": "1",
        "image": "image/laptopASUS_zenbook14.webp",
        'small_img1': './ASUS Zenbook 14/back.jpg',
        'small_img2': './ASUS Zenbook 14/backside.jpg',
        'small_img3': './ASUS Zenbook 14/flat.jpg',
        'small_img4': './ASUS Zenbook 14/frontside.jpg',
        "title": "Laptop ASUS Zenbook 14 OLED UX3402VA KM068W",
        "price": "24.990.000",
        "category": "ASUS",
        'describe_CPU': 'CPU: Intel Core i5-1340P (upto 4.60 GHz, 12MB)',
        'describe_RAM': 'RAM: 16GB LPDDR5 on board',
        'describe_disk': 'Ổ cứng: 512GB M.2 NVMe™ PCIe® 4.0 SSD',
        'describe_VGA': 'VGA: Intel Iris Xe Graphics'
    },
    {
        "number": "2",
        "image": "./image/acer predator.webp",
        'small_img1': './Acer Predator Helios Neo/backside.jpg',
        'small_img2': './Acer Predator Helios Neo/edge.jpg',
        'small_img3': './Acer Predator Helios Neo/side.jpg',
        'small_img4': './Acer Predator Helios Neo/topside.jpg',
        "title": "Laptop gaming Acer Predator Helios Neo PHN16 71 779X",
        "price": "39.990.000",
        "category": "ACER",
        'describe_CPU': 'CPU: Intel Core i7-13700HX (upto 5.00 GHz, 30MB) ',
        'describe_RAM': 'RAM: 8GB DDR5 4800MHz (2 khe, Nâng cấp tối đa 32GB) ',
        'describe_disk': 'Ổ cứng: 512GB PCIe NVMe SED SSD (nâng cấp tối đa 2TB SSDPCIe Gen4, 16 Gb/s, NVMe)',
        'describe_VGA': 'VGA: NVIDIA GeForce RTX 4050 6GB'

    },
    {
        "number": "4",
        "image": "./Laptop HP Pavilion 15/main_img.webp",
        'small_img1': './Laptop HP Pavilion 15/backside.webp',
        'small_img2': './Laptop HP Pavilion 15/leftside.webp',
        'small_img3': './Laptop HP Pavilion 15/rightside.webp',
        'small_img4': './Laptop HP Pavilion 15/edge.webp',
        "title": "Laptop HP Pavilion 15-eg2035TX (6K781PA) (i5-1235U/RAM 8GB/512GB SSD)",
        "price": "16.990.000",
        "category": "HP",
        'describe_CPU': 'CPU: Intel Core i5-1235U',
        'describe_RAM': 'RAM: 2 x 4GB DDR4 3200MHz',
        'describe_disk': 'Ổ cứng:512GB SSD M.2 NVMe ',
        'describe_VGA': 'VGA: GeForce MX550 2GB GDDR6 / Intel Iris Xe Graphics'
    },
    {
        "number": "5",
        "image": "./MSI modern 15/main_img.jpg",
        'small_img1': './MSI modern 15/frontside.jpg',
        'small_img2': './MSI modern 15/rightside.jpg',
        'small_img3': './MSI modern 15/top.jpg',
        'small_img4': './MSI modern 15/backside.jpg',
        "title": "Laptop MSI Modern 14 C12MO-660VN (Intel Core i5-1235U 14 inch FHD)",
        "price": "13.490.000",
        "category": "MSI",
        'describe_CPU': 'CPU: Intel Core i5-1235U (tối đa 4.40 GHz, 12MB)',
        'describe_RAM': 'RAM: 16GB DDR4 3200MHz',
        'describe_disk': 'Ổ cứng: 512GB SSD',
        'describe_VGA': 'VGA: Intel Iris Xe Graphics'
    },
    {
        "number": "6",
        "image": "./Laptop Lenovo IdeaPad 3/main_img.jpg",
        'small_img1': './Laptop Lenovo IdeaPad 3/main_img.jpg',
        'small_img2': './Laptop Lenovo IdeaPad 3/flat.jpg',
        'small_img3': './Laptop Lenovo IdeaPad 3/side.jpg',
        'small_img4': './Laptop Lenovo IdeaPad 3/bottom.jpg',
        "title": "Laptop Lenovo IdeaPad 3 14ITL6 82H701QYVN",
        "price": "12.990.000",
        "category": "LENOVO",
        'describe_CPU': 'CPU: Intel Core i5-1155G7 (upto 4.50GHz, 8MB)',
        'describe_RAM': 'RAM: 16GB (8GB Soldered DDR4-3200 + 8GB SO-DIMM DDR4-3200)',
        'describe_disk': 'Ổ cứng: 512GB SSD M.2 2242 PCIe® 4.0x4 NVMe®',
        'describe_VGA': 'VGA: Integrated Intel® Iris® Xe Graphics'
    },
    {
        "number": "7",
        "image": "./Laptop Lenovo Yoga Slim 6/main_img.jpg",
        'small_img1': './Laptop Lenovo Yoga Slim 6/flat.jpg',
        'small_img2': './Laptop Lenovo Yoga Slim 6/rightside.jpg',
        'small_img3': './Laptop Lenovo Yoga Slim 6/leftside.jpg',
        'small_img4': './Laptop Lenovo Yoga Slim 6/top.jpg',
        "title": "Laptop Lenovo Yoga Slim 6 14IRH8 83E00008VN",
        "price": "23.990.000",
        "category": "LENOVO",
        'describe_CPU': 'CPU: Intel Core i7-13700H (up to 5.0GHz, 24MB)',
        'describe_RAM': 'RAM: 16GB Soldered LPDDR5x-5200',
        'describe_disk': 'Ổ cứng: 512GB SSD M.2 2242 PCIe® 4.0x4 NVMe',
        'describe_VGA': 'VGA: Integrated Intel Iris Xe Graphics'
    },
    {
        "number": "8",
        "image": "./Lenovo ThinkPad E14/main_img.jpg",
        'small_img1': './Lenovo ThinkPad E14/backside.jpg',
        'small_img2': './Lenovo ThinkPad E14/flat.jpg',
        'small_img3': './Lenovo ThinkPad E14/leftside.jpg',
        'small_img4': './Lenovo ThinkPad E14/rightside.jpg',
        "title": "Laptop Lenovo ThinkPad E14 Gen 5 21JK0069VA",
        "price": "20.390.000",
        "category": "LENOVO",
        'describe_CPU': 'CPU: Intel Core i5-1335U (upto 4.60 GHz, 12MB)',
        'describe_RAM': 'RAM: 8GB Soldered DDR4-3200 + 8GB SO-DIMM DDR4-3200 (tối đa 40GB)',
        'describe_disk': 'Ổ cứng: 512GB SSD M.2 2242 PCIe® 4.0x4 NVMe® Opal 2.0',
        'describe_VGA': 'VGA: Integrated Intel® Iris® Xe Graphics Functions as UHD Graphics'
    },
    {
        "number": "9",
        "image": "./Lenovo IdeaPad Slim 5/main_img.jpg",
        'small_img1': './Lenovo ThinkBook 14/flat.jpg',
        'small_img2': './Lenovo ThinkBook 14/pad.jpg',
        'small_img3': './Lenovo ThinkBook 14/top.jpg',
        'small_img4': './Lenovo ThinkBook 14/side.jpg',
        "title": "Laptop Lenovo IdeaPad Slim 5 16IAH8 83BG001XVN",
        "price": "19.190.000",
        "category": "LENOVO",
        'describe_CPU': 'CPU: Intel core i5 1240P up to 1.7GHz',
        'describe_RAM': 'RAM: 8 GBDDR4 2 khe (1 khe 8 GB onboard + 1 khe trống)3200 MHz',
        'describe_disk': 'Ổ cứng:Hỗ trợ thêm 1 khe cắm SSD M.2 PCIe mở rộng,512 GB SSD NVMe PCIe ',
        'describe_VGA': 'VGA: Card tích hợp Intel UHD'
    },
    {
        "number": "3",
        "image": "./dell inspiron t7430/main_img.jpg",
        'small_img1': './dell inspiron t7430/back.jpg',
        'small_img2': './dell inspiron t7430/backside.jpg',
        'small_img3': './dell inspiron t7430/backside_from_right.jpg',
        'small_img4': './dell inspiron t7430/top.jpg',
        "title": "Laptop Dell Inspiron T7430 N7430I58W1 Silver",
        "price": "16.490.000",
        "category": "DELL",
        'describe_CPU': 'CPU: Intel® Core™ i5-1335U (12 MB cache, 10 cores, 12 threads, up to 4.60 GHz Turbo)',
        'describe_RAM': 'RAM: 16GB LPDDR5 on boardRam: 8GB, LPDDR5, 4800 MHz',
        'describe_disk': 'Ổ cứng: 512GB M.2 PCIe NVMe SSD',
        'describe_VGA': 'Card đồ hoạ: Intel® Iris® Xe Graphics'
    },
    {
        "number": "10",
        "image": "./Asus Vivobook 14/main_img.jpg",
        'small_img1': './Asus Vivobook 14/main_img.jpg',
        'small_img2': './Asus Vivobook 14/backside.jpg',
        'small_img3': './Asus Vivobook 14/flat.jpg',
        'small_img4': './Asus Vivobook 14/flat2.jpg',
        "title": "Laptop Asus Vivobook 14 X1404VA-NK125W",
        "price": "13.590.000",
        "category": "ASUS",
        'describe_CPU': 'CPU: Intel Core i5-1335U (upto 4.60GHz, 12MB)',
        'describe_RAM': 'RAM: RAM 8GB DDR4 Onboard (Còn trống 1x DDR4 SO-DIMM slot)',
        'describe_disk': 'Ổ cứng: SSD 256GB M.2 NVMe™ PCIe® 4.0',
        'describe_VGA': 'VGA: Intel Iris Xe Graphics có điều kiện khi sử dụng Dual RAM'
    },
    {
        "number": "11",
        "image": "./ASUS TUF/main_img.jpg",
        'small_img1': './ASUS TUF/back.jpg',
        'small_img2': './ASUS TUF/pad.jpg',
        'small_img3': './ASUS TUF/side.jpg',
        'small_img4': './ASUS TUF/rightside.jpg',
        "title": "Laptop ASUS TUF Gaming F15 FX506HF HN014W",
        "price": "16.890.000",
        "category": "ASUS",
        'describe_CPU': 'CPU: Intel Core i5-11400H (upto 4.50GHz, 12MB)',
        'describe_RAM': 'RAM: 8GB DDR4 3200MHz (2x SO-DIMM socket, up to 32GB)',
        'describe_disk': 'Ổ cứng: 512GB M.2 NVMe™ PCIe 3.0 SSD',
        'describe_VGA': 'VGA: Intel Iris Xe Graphics'
    },
    {
        "number": "12",
        "image": "./Asus ROG/main_img.jpg",
        'small_img1': './Asus ROG/back.jpg',
        'small_img2': './Asus ROG/flat.jpg',
        'small_img3': './Asus ROG/front.jpg',
        'small_img4': './Asus ROG/top.jpg',
        "title": "Laptop Asus ROG Strix G16 G614JV N4261W",
        "price": "45.990.000",
        "category": "ASUS",
        'describe_CPU': 'CPU: Intel Core i9-13980HX (36MB, upto 5.6 GHz)',
        'describe_RAM': 'RAM: 16GB (1x16GB) DDR5 4800MHz (2x slots, up to 32GB)',
        'describe_disk': 'Ổ cứng: 1TB M.2 NVMe PCIe 4.0 SSD (Trống 1 slot M.2 NVMe, tối đã 4TB)',
        'describe_VGA': 'VGA: NVIDIA® GeForce RTX 4060 8GB GDDR6'
    }
]

localStorage.setItem('product', JSON.stringify(window.data));
var product_data_local = JSON.parse(localStorage.getItem('product')) || [];
// var product_data_local=[];
// for(let i =0 ;i<window.data.length;i++)
// {
//     localStorage.setItem(i,JSON.stringify(window.data[i]));
//     product_data_local[i]=JSON.parse(localStorage.getItem(i));
// }

// console.log(product_data_local);
//////////////////////////////////////////////////////////////////////////////////////////
/////////////////RENDER SẢN PHẨM/////////////////////////////////////////////////////////

// let mainContainer = document.getElementById("myData");
function render() {
    for (let i = 0; i < product_data_local.length; i++) {
        let div = `
                <div class="product" id="${product_data_local[i].category}">
                    <img src="${product_data_local[i].image}">
                    <div class="des-contaner">
                        <div class="title">${product_data_local[i].title}</div>
                        <div class="price"><span>${product_data_local[i].price}<span><span>đ</span></div>
                        <div class="cart_button"><ion-icon name="cart-outline"></ion-icon></div>
                    </div>
                <div>
                `
        document.querySelector('.products').innerHTML += div;
    }
}


if (localStorage.length != 12) {
    console.log("localstorage length: ", localStorage.length);
    render();
}
///////////////////////////////////////////////////////////////////////////////
//////////////////CHI TIẾT SẢN PHẨM//////////////////////////////////////////////


let products = document.querySelectorAll('.product');
products.forEach(function (product) {
    product_img = product.querySelector('img');
    product_img.addEventListener('click', function (event) {
        let product_item = event.target.parentElement;
        let product_name = product_item.querySelector('.title').innerText;
        for (let i = 0; i < product_data_local.length; i++) {
            if (product_data_local[i].title === product_name) {
                let newDiv = document.querySelector('.detail-container');
                console.log(newDiv);
                let div = `
                        <div class='detail-close-button'><span>x</span></div>
                        <div class="left-container">
                            <img src="${product_data_local[i].image}">
                            <div class="small-img">
                                <img src="${product_data_local[i].small_img1}">
                                <img src="${product_data_local[i].small_img2}">
                                <img src="${product_data_local[i].small_img3}">
                                <img src="${product_data_local[i].small_img4}">
                            </div>
                        </div>
                        <div class="right-container">
                            <h6>${product_data_local[i].title}</h6>
                            <h7>${product_data_local[i].price}đ</h7>
                            </br>
                            <button>MUA NGAY</button>
                            <p>Mô tả sản phẩm:</p>
                            </br>
                            <p>${product_data_local[i].describe_CPU}</p>
                            </br>
                            <p>${product_data_local[i].describe_RAM}</p>
                            </br>
                            <p>${product_data_local[i].describe_disk}</p>
                            </br>
                            <p>${product_data_local[i].describe_VGA}</p>
                        </div>
                `
                newDiv.innerHTML = div;
                newDiv.style.display = 'block';
                let close_button_detail = document.querySelector('.detail-close-button');
                close_button_detail.addEventListener('click', function () {
                    newDiv.style.display = 'none';
                })
                let button = newDiv.querySelector('.right-container button');
                button.addEventListener('click', function () {
                    addcart(product_data_local[i].image, product_data_local[i].title, product_data_local[i].price);
                    delete_cart();
                    input_change();
                })
                let small_imgs = document.querySelectorAll('.small-img img');
                let main_img = document.querySelector('.left-container img');
                small_imgs.forEach(function (small_img) {
                    small_img.addEventListener('click', function (event) {
                        main_img.src = event.target.src;
                    })
                })
            }
        }
    });
})

function addcart(product_img, product_name, product_price) {
    var addtr = document.createElement("tr");

    var cartItem = document.querySelectorAll("tbody tr");
    for (var i = 0; i < cartItem.length; i++) {
        var productName = document.querySelectorAll(".title_cart");
        console.log(productName[i]);
        if (productName[i].innerHTML === product_name) {
            alert("Sản phẩm của bạn đã có trong giỏ hàng.");
            return;
        }
    }

    var addcontent =
        `
        <td style="display: flex;align-items: center;"><img style="width:70px;" src="${product_img}" alt=""><span class="title_cart">${product_name}</span></td>
        <td><p><span class="prices">${product_price}</span></p></td>
        <td><input class="input_row" style="width:40px;outline: none;" type="number" value="1" min="1"></td>
        <td><span style="cursor:pointer" class="delete-button">XÓA</span></td>
    `
    addtr.innerHTML = addcontent;
    var carttable = document.querySelector("tbody");
    carttable.appendChild(addtr);
    cartTotal();

}



////////////////////////////////////////////////////.////////////////////////
///////////////////GIỎ HÀNG//////////////////////////////////////////////////
const product_item = document.querySelectorAll(".product");
document.addEventListener('DOMContentLoaded', function () {
    // the code
    //make AJAX request when button is clicked
    var buttons = document.querySelectorAll(".cart_button");
    // console.log("button ne: ",buttons);
});
const btn = document.querySelectorAll(".cart_button");

btn.forEach(function (button, index) {
    button.addEventListener('click', function (event) {
        var btnItem = event.target;
        var product = btnItem.parentElement.parentElement.parentElement;
        var product_img = product.querySelector("img").src;
        var product_name = product.querySelector(".title").innerText;
        var product_price = product.querySelector(".price").innerText;
        addcart(product_img, product_name, product_price);
        delete_cart();
        input_change();
    })
})

function addcart(product_img, product_name, product_price) {
    if (!isLoggedIn) {
        alert('Vui lòng đăng nhập để thêm sản phẩm vào giỏ hàng.');
        return;
    }
    var addtr = document.createElement("tr");

    var cartItem = document.querySelectorAll("tbody tr");
    for (var i = 0; i < cartItem.length; i++) {
        var productName = document.querySelectorAll(".title_cart");
        console.log(productName[i]);
        if (productName[i].innerHTML === product_name) {
            alert("Sản phẩm của bạn đã có trong giỏ hàng.");
            return;
        }
    }

    var addcontent =
        `
        <td style="display: flex;align-items: center;"><img style="width:70px;" src="${product_img}" alt=""><span class="title_cart">${product_name}</span></td>
        <td><p><span class="prices">${product_price}</span></p></td>
        <td><input class="input_row" style="width:40px;outline: none;" type="number" value="1" min="1"></td>
        <td><span style="cursor:pointer" class="delete-button">XÓA</span></td>
    `
    addtr.innerHTML = addcontent;
    var carttable = document.querySelector("tbody");
    carttable.appendChild(addtr);
    cartTotal();

}




function cartTotal() {
    if (!isLoggedIn) {
        alert('Vui lòng đăng nhập để xem giỏ hàng và thanh toán.');
        return;
    }
    var cartItem = document.querySelectorAll("tbody tr");
    var totalALL = 0;
    for (var i = 0; i < cartItem.length; i++) {
        var inputValue = cartItem[i].querySelector("input").value;
        var productPrice_text = cartItem[i].querySelector(".prices").innerText;
        var productPrice = productPrice_text.replaceAll('đ', '').replaceAll('.', '');
        var total_int = inputValue * productPrice;
        totalALL += total_int;
    }
    var total_cart = document.getElementsByClassName('price-total')[0];
    var total_cart_span = total_cart.querySelector('span');
    total_cart_span.innerText = totalALL.toLocaleString('de-DE');

    //add them vao phan gio hang (nav bar)
    var total_price_value = document.querySelector(".total-price-value");
    total_price_value.innerText = totalALL.toLocaleString('de-DE') + "đ";
}



function delete_cart() {
    if (!isLoggedIn) {
        alert('Vui lòng đăng nhập để xóa sản phẩm khỏi giỏ hàng.');
        return;
    }
    var cartItem = document.querySelectorAll("tbody tr");
    for (var i = 0; i < cartItem.length; i++) {
        var delete_btn = document.querySelectorAll(".delete-button");
        delete_btn[i].addEventListener('click', function (event) {
            var cartDelete = event.target;
            var delete_container = cartDelete.parentElement.parentElement;
            delete_container.remove();
            cartTotal();
        })
    }
}

function input_change() {
    if (!isLoggedIn) {
        alert('Vui lòng đăng nhập để thay đổi số lượng sản phẩm trong giỏ hàng.');
        return;
    }
    var cartItem = document.querySelectorAll("tbody tr");
    for (var i = 0; i < cartItem.length; i++) {
        var input_number = document.querySelectorAll(".input_row");
        input_number[i].addEventListener('change', function (event) {
            cartTotal();
        })
    }
}

const addtocart_popup = document.querySelector("#addtocart");
const cart_container = document.querySelector(".cart");
addtocart_popup.addEventListener('click', function () {
    cart_container.style.right = "0";
})

const close_button_cart = document.querySelector(".close-button-cart");
close_button_cart.addEventListener('click', function () {
    cart_container.style.right = "-100%";
})

//////////////////////////////////////////////////////////////////////////////////
/////////////////////////SEARCHING VÀ FILTER VÀ PHÂN LOẠI SẢN PHẨM////////////////

function filterProduct(value) {
    let buttons = document.querySelectorAll(".filter-button");
    buttons.forEach(function (button) {

        if (value == button.innerText) {
            console.log(button);
            button.classList.add("active");
        }
        else {
            button.classList.remove("active");
        }
    });
    var cards = document.querySelectorAll(".product");
    cards.forEach(function (card) {
        if (value == "ALL") {
            // card.classList.remove("hide");
            card.style.display = 'block';
        }
        else {
            if (card.id == value) {
                // card.classList.remove("hide");
                card.style.display = 'block';
            }
            else {
                // card.classList.add("hide");
                card.style.display = 'none';
            }
        }
    })

}


var searching_button = document.querySelector('.searching-button');
var searching_input = searching_button.parentElement.querySelector('input');

function searching_method() {
    var cards = document.querySelectorAll(".product");

    var elements = document.querySelectorAll(".title");

    var search_input = searching_button.parentElement.querySelector("input").value;
    console.log(cards, elements, search_input);
    elements.forEach(function (element, index) {
        if (element.innerText.toLowerCase().includes(search_input.toLowerCase())) {
            // cards[index].classList.remove("hide");
            cards[index].style.display = "block";

        }
        else {
            // cards[index].classList.add("hide");
            cards[index].style.display = "none";
        }
    })

}
searching_input.addEventListener('input', searching_method);
searching_button.addEventListener("click", searching_method);


/////////////////TÌM KIẾM NÂNG CAO (advance searching)////////////////////////////////
let search_container = document.querySelector('.advance-search');
let min_input = search_container.querySelector('.min input');
let min_input_value = 0;
let confirm_button = search_container.querySelector('.min-max-confirm');

min_input.addEventListener('input', function (event) {
    min_input_value = event.target.value;
})

let max_input = search_container.querySelector('.max input');
let max_input_value = 0;
max_input.addEventListener('change', function (event) {
    max_input_value = event.target.value;
})

function check_gia(min, max) {
    let products = document.querySelectorAll('.product');
    let prices = document.querySelectorAll('.price');
    prices.forEach(function (price_item, index) {
        let price_string = price_item.innerText;
        let price_number = price_string.replaceAll('đ', '');
        console.log(min, max);
        if (min == 0 && max == 0) {
            return;
        }
        else if (min == 0 && max != 0) {
            if (price_number <= max) {
                products[index].style.display = 'block';
            }
            else {
                products[index].style.display = 'none';
            }
        }
        else if (max == 0 && min != 0) {
            if (price_number >= min) {
                products[index].style.display = 'block';
            }
            else {
                products[index].style.display = 'none';
            }
        }
        else {
            if (price_number >= min && price_number <= max) {
                products[index].style.display = 'block';
            }
            else {
                products[index].style.display = 'none';
            }
        }
    })
}



confirm_button.addEventListener('click', function () {
    check_gia(min_input_value, max_input_value);
    min_input.value = '';
    max_input.value = '';
})

///////////////////////////////////////////////////////////////////////////
function filterProduct_advance(value) {
    let select_container = document.querySelector('#select-type');
    let select_item = select_container.querySelectorAll('option');
    select_item.forEach(function (button) {
        console.log(button);
        if (value == button.innerText) {
            console.log(value);
            button.classList.add("active");
        }
        else {
            button.classList.remove("active");
        }
    });
    var cards = document.querySelectorAll(".product");
    cards.forEach(function (card) {
        if (value == "ALL") {
            // card.classList.remove("hide");
            card.style.display = 'block';
        }
        else {
            if (card.id == value) {
                // card.classList.remove("hide");
                card.style.display = 'block';
            }
            else {
                // card.classList.add("hide");
                card.style.display = 'none';
            }
        }
    })

}


let nav_input = document.querySelector('.responsive-icon');
console.log(nav_input);
nav_input.addEventListener('click', function () {
    let searching_container = document.querySelector('.searching-for-ipad');
    console.log(searching_container);
    searching_container.style.display = 'block';
}
)



let select_category = document.querySelector('.advance-search div select ');
select_category.addEventListener('change', function (event) {
    filterProduct(event.target.value);
})
//////////////////////////////////////////////////////////////
///////////////////////PHÂN TRANG////////////////////////////
let thispage = 1;
let limit = 8;
let list = document.querySelectorAll(".product");

function loadItem() {
    let beginGet = limit * (thispage - 1);
    let endGet = limit * thispage - 1;
    list.forEach(function (item, key) {
        if (key >= beginGet && key <= endGet) {
            item.style.display = 'block';
        }
        else {
            item.style.display = 'none';
        }
    })
    listPage();
}

function listPage() {
    let count = Math.ceil(list.length / limit);
    let Page_container = document.querySelector('.listPage');
    // console.log(Page_container);
    Page_container.innerHTML = '';
    if (thispage != 1) {
        let prev = document.createElement('li');
        prev.innerText = 'PREV';
        prev.setAttribute('onclick', "changePage(" + (thispage - 1) + ")");
        Page_container.appendChild(prev);

    }




    for (i = 1; i <= count; i++) {
        let newPage = document.createElement('li');
        newPage.innerText = i;
        if (i == thispage) {
            newPage.classList.add('active');
        }
        newPage.setAttribute('onclick', "changePage(" + i + ")");
        var page_span = document.querySelector('.listPage');
        // console.log(page_span);
        page_span.appendChild(newPage);
    }

    if (thispage != count) {
        let next = document.createElement('li');
        next.innerText = 'NEXT';
        next.setAttribute('onclick', "changePage(" + (thispage + 1) + ")");
        Page_container.appendChild(next);
    }
}



function changePage(i) {
    thispage = i;
    loadItem();
}




loadItem();




//////////////////////////////////FORM ĐĂNG NHẬP//////////////////////
//////////////////////////////////////////////////////////////////////
var Admin = "ADMIN";
var admin = {
    username: 'admin1',
    password: '123456789',
    role: 'admin'
};
localStorage.setItem(Admin, JSON.stringify([admin]));

var isLoggedIn = false;
window.addEventListener('beforeunload', function () {
    // Lưu trạng thái hiện tại vào localStorage
    var currentState = {
        isLoggedIn: isLoggedIn,
        currentUser: getCurrentUser()
    };
    localStorage.setItem('pageState', JSON.stringify(currentState));
});

document.addEventListener('DOMContentLoaded', function () {
    // Kiểm tra xem có trạng thái đã lưu trước đó hay không khi trang được load lại
    var savedState = localStorage.getItem('pageState');

    if (savedState) {
        // Khôi phục trạng thái từ localStorage
        var currentState = JSON.parse(savedState);
        isLoggedIn = currentState.isLoggedIn;

        // Nếu người dùng đã đăng nhập, cập nhật thông tin người dùng hiện tại
        if (isLoggedIn) {
            setCurrentUser(currentState.currentUser);
            showUserInfo();
            // showUserOrders();
        }

        // Cập nhật UI dựa trên trạng thái đã lưu
        updateUI();
    }
});

document.addEventListener('DOMContentLoaded', function () {
    // Call updateUI when the page loads to set the initial state
    updateUI();

    // Check if the user was logged in before the refresh
    if (isLoggedIn) {
        // Update UI for logged-in state after page refresh
        updateLoggedInUI();
    }
});

function existed_account(formType) {
    var signupform = document.querySelector('.container2');
    var loginform = document.querySelector('.container1');

    if (formType === 'changing_into_login') {
        signupform.style.display = 'none';
        loginform.style.display = 'bloke';
    } else {
        loginform.style.display = 'none';
        signupform.style.display = 'block';
    }

    // existed_account.addEventListener('click', () => {
    //     if (window.getComputedStyle(signupform).display === 'block') {
    //         toggleSignupAndLogin('login');
    //     }
    // })
}
document.querySelector('.para__existed-acc').addEventListener('click', function () {
    toggleSignupAndLogin('login');
})
document.querySelector('.para__no-account').addEventListener('click', function () {
    toggleSignupAndLogin('signup');
})

//-----------------------------------------------Tắt form đăng nhập, đăng ký-------------------------------------------------//
function exitForm(exitId, formSelector) {
    var exit = document.getElementById(exitId);
    var form = document.querySelector(formSelector);

    exit.addEventListener('click', function () {
        if (form.style.display === 'block') {
            form.style.display = 'none';
        }
    });
}
exitForm('auth__form-icon-exit-2', '.container2');
exitForm('auth__form-icon-exit-1', '.container1');

// -----------------------------------------------Bật form đăng nhập, đăng ký-------------------------------------------------//
function toggleSignupAndLogin(formType) {

    console.log('Toggle called with formType:', formType);

    var signupForm = document.querySelector('.container2');
    var loginForm = document.querySelector('.container1');
    var exitSignup = document.getElementById('auth__form-icon-exit-2');
    var exitLogin = document.getElementById('auth__form-icon-exit-1');

    if (formType === 'signup') {
        signupForm.style.display = 'block';
        loginForm.style.display = 'none';
        exitSignup.style.display = 'block';
        exitLogin.style.display = 'none';
    } else {
        signupForm.style.display = 'none';
        loginForm.style.display = 'block';
        exitSignup.style.display = 'none';
        exitLogin.style.display = 'block';
    }
}
document.getElementById('container2').addEventListener('click', function () {
    toggleSignupAndLogin('signup');
});
document.getElementById('container1').addEventListener('click', function () {
    toggleSignupAndLogin('login');
});


// -----------------------------------------------Sự kiện ấn vào nút đăng ký và lưu thông tin lên local storage-------------------------------------------------//
function registerUser() {
    var username = document.querySelector('.auth__form-sigin-input-user').value;
    var name = document.querySelector('.auth__form-signin-input-name').value;
    var email = document.querySelector('.auth__form-signin-input-email').value;
    var phoneNum = document.querySelector('.auth__form-signin-input-phone-nums').value;
    var password = document.querySelector('.auth__form-signin-input-password').value;
    var confirmPassword = document.querySelector('.auth__form-signin-input-password-confirm').value;
    var agreeCheckbox = document.querySelector('.auth__form-signin-checkbox');

    // Kiểm tra và xử lý các điều kiện đăng ký
    if (!username || !name || !email || !phoneNum || !password || !confirmPassword) {
        alert('Vui lòng điền đầy đủ thông tin');
        return;
    }

    var phoneNumRegex = /^\d{10,12}$/;
    if (!phoneNumRegex.test(phoneNum)) {
        alert('Số điện thoại không hợp lệ. Vui lòng nhập từ 10 đến 12 chữ số.');
        return;
    }

    // Check email format (should end with @gmail.com)
    var emailRegex = /^[a-zA-Z0-9._-]+@gmail\.com$/;
    if (!emailRegex.test(email)) {
        alert('Email không hợp lệ. Vui lòng nhập lại và chắc chắn rằng địa chỉ email kết thúc bằng @gmail.com.');
        return;
    }

    if (password.length < 8) {
        alert('Mật khẩu phải có ít nhất 8 ký tự');
        return;
    }

    if (password !== confirmPassword) {
        alert('Mật khẩu và xác nhận mật khẩu không khớp');
        return;
    }

    if (!agreeCheckbox.checked) {
        alert('Vui lòng đồng ý với các điều khoản dịch vụ để hoàn tất đăng ký');
        return;
    }

    // Lưu thông tin người dùng vào localStorage
    var existingUsers = JSON.parse(localStorage.getItem('users')) || [];
    var nextUserCode = getNextUserCode(existingUsers);

    var user = {
        accountcode: nextUserCode,
        username: username,
        name: name,
        email: email,
        phone_num: phoneNum,
        password: password,
        role: 'user'
    };

    // Check if the username is already taken
    if (existingUsers.some(u => u.username === username)) {
        alert('Tên đăng nhập đã tồn tại');
        return;
    }

    // Add the new user to the array
    existingUsers.push(user);

    // Save the updated user array to localStorage
    localStorage.setItem('users', JSON.stringify(existingUsers));

    // Lưu trạng thái đăng nhập và thông tin người dùng
    // isLoggedIn = true;
    // setCurrentUser(user);

    // Cập nhật giao diện
    //updateUI();

    // Reset form fields
    resetFormFields('.auth__form-sigin-input-user', '.auth__form-signin-input-name', '.auth__form-signin-input-email', '.auth__form-signin-input-phone-nums', '.auth__form-signin-input-password', '.auth__form-signin-input-password-confirm', '.auth__form-signin-checkbox');

    alert('Đăng ký thành công');
    document.querySelector('.container2').style.display = 'none';
}

function getNextUserCode(existingUsers) {
    var newUserCode = '';

    if (existingUsers.length === 0) {
        newUserCode = 'KN01';
    } else {
        var lastUser = existingUsers[existingUsers.length - 1];
        var lastUserCode = lastUser ? lastUser.accountcode : null;

        if (lastUserCode && /^KN\d{2}$/.test(lastUserCode)) {
            var lastNumber = parseInt(lastUserCode.substring(2));
            var newNumber = lastNumber + 1;
            newUserCode = 'KN' + ('0' + newNumber).slice(-2);
        } else {
            newUserCode = 'KN01';
        }
    }

    return newUserCode;
}

// -----------------------------------------------Sự kiện ấn vào nút đăng nhập-------------------------------------------------//


function loginUser() {
    event.preventDefault();
    var username = document.querySelector('.auth__form-login-username').value;
    var password = document.querySelector('.auth__form-login-pasword').value;

    var existingUsers = JSON.parse(localStorage.getItem('users')) || [];
    var existingAdmin = JSON.parse(localStorage.getItem('ADMIN'));

    var loggedInUser;

    if (existingAdmin && existingAdmin.find(u => u.username === username && u.password == password)) {
        loggedInUser = existingAdmin.find(u => u.username === username);
        window.location.href = "web_admin/admin.html";
    } else {
        loggedInUser = existingUsers.find(u => u.username === username && u.password === password);
        if (loggedInUser) {
            alert('Đăng nhập thành công');

            isLoggedIn = true;

            // document.getElementById("container__signup-form").style.display = 'none';
            // document.getElementById('container__login-form').style.display = 'none';

            // document.getElementById('container_client').style.display = 'block';
            // document.getElementById('auth__form-client').innerHTML = 'CHÀO, ' + username;

            // document.getElementById('container_exit_client').style.display = 'block';
            setCurrentUser(loggedInUser);

            updateUI();
            //showUserInfo();
            //showUserOrders();
            location.reload();
            document.querySelector('.container1').style.display = 'none';
        } else {
            alert('Tên đăng nhập hoặc mật khẩu không đúng');
        }
    }


    document.querySelector('.auth__form-login-username').value = null;
    document.querySelector('.auth__form-login-pasword').value = null;
    // location.reload();
    // document.querySelector('.container1').style.display = 'none';
}

// document.querySelector('.auth__form-login-btn-submit').addEventListener('click', loginUser());

// -----------------------------------------------Đắng xuất khỏi account-------------------------------------------------//
function logoutUser() {
    // document.getElementById('container__signup-form').style.display = 'block';
    // document.getElementById('container__login-form').style.display = 'block';

    // document.querySelector('.container1').style.display = 'none';
    // document.getElementById('container_client').style.display = 'none';
    // document.getElementById('container_exit_client').style.display = 'none';

    // isLoggedIn = false;

    // clearCurrentUser();

    // updateUI();


    // Clear current user from local storage
    isLoggedIn = false;
    clearCurrentUser();

    // Cập nhật giao diện
    updateUI();
    location.reload();
}


// -----------------------------------------------Cập nhật giao diẹn khi đăng nhập, đăng xuất-------------------------------------------------//
function updateUI() {
    if (isLoggedIn) {
        updateLoggedInUI();
    } else {
        updateLoggedOutUI();
    }
}
function updateLoggedInUI() {
    var username = getCurrentUser().username;

    // Ẩn các biểu mẫu đăng nhập và hiện nội dung đã đăng nhập
    document.getElementById('container__signup-form').style.display = 'none';
    document.getElementById('container__login-form').style.display = 'none';
    document.getElementById('container_client').style.display = 'block';

    // Hiển thị tên người dùng đã đăng nhập
    document.getElementById('auth__form-client').innerHTML = 'CHÀO, ' + username;

    // Hiển thị nút đăng xuất
    document.getElementById('container_exit_client').style.display = 'block';
    document.getElementById('information').style.display = 'block';
}

// Function to update the UI for logged-out state
function updateLoggedOutUI() {
    // Hiển thị biểu mẫu đăng nhập và ẩn nội dung đã đăng nhập
    document.getElementById('container__signup-form').style.display = 'block';
    document.getElementById('container__login-form').style.display = 'block';
    document.getElementById('container_client').style.display = 'none';

    // Ẩn nút đăng xuất
    document.getElementById('container_exit_client').style.display = 'none';
    document.getElementById('information').style.display = 'none';
}

// --------------------------------------Đưa cái dòng chứa dữ liệu như form đăng ký, đăng nhập về lại rỗng --------------------------------------//
function resetFormFields(...selectors) {
    selectors.forEach(selector => {
        document.querySelector(selector).value = '';
    });
}


// -----------------------------------------------Lấy, xoá, lưu người dùng hiện tại-------------------------------------------------//
function setCurrentUser(user) {
    if (!isLoggedIn) {
        return;
    }
    localStorage.setItem('currentUser', JSON.stringify(user));
}

// function getCurrentUser() {
//     return JSON.parse(localStorage.getItem('currentUser')) || {};
// }

function getCurrentUser() {
    if (!isLoggedIn) {

    }
    // Lấy thông tin người dùng hiện tại từ localStorage
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));

    // Kiểm tra nếu có thông tin người dùng hiện tại thì trả về
    if (currentUser) {
        return currentUser;
    } else {
        // Nếu không có, kiểm tra nếu có danh sách người dùng thì cập nhật 'currentUser'
        const loggedInUser = localStorage.getItem('users') ? JSON.parse(localStorage.getItem('users')) : [];
        setCurrentUser(loggedInUser);

        // Lấy thông tin người dùng hiện tại từ localStorage sau khi cập nhật
        const updatedCurrentUser = JSON.parse(localStorage.getItem('currentUser'));

        // Trả về thông tin người dùng hiện tại hoặc null nếu không có
        return updatedCurrentUser || null;
        // return;
    }
}

function clearCurrentUser() {
    localStorage.removeItem('currentUser');
}
// -----------------------------------------------Hiện trang thông tin người dùng-------------------------------------------------//

function DisplatInf() {
    var uinfo = document.querySelector(".page__infor-users");
    uinfo.style.display = 'block';
}
function OffInfo() {
    var uinfo = document.querySelector(".page__infor-users");
    uinfo.style.display = 'none';
}

////////////////////////////////////////////////MUA HÀNG//////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////


function handlePurchaseButtonClick() {
    event.preventDefault();

    // Check if the user is logged in

    if (!isLoggedIn) {
        alert("Vui lòng đăng nhập để chốt đơn hàng.");
        return;
    }
    const currentUser = getCurrentUser();
    // Proceed with order placement if the user is logged in
    const orderDetails = [];
    const cartItems = document.querySelectorAll("tbody tr");

    if (cartItems.length === 0) {
        alert("Giỏ hàng của bạn đang trống. Vui lòng thêm sản phẩm vào giỏ hàng trước khi chốt đơn.");
        return;
    }

    cartItems.forEach(function (item) {
        const productName = item.querySelector(".title_cart").innerText;
        const productPrice = parseFloat(item.querySelector(".prices").innerText.replace("đ", "").replace(",", ""));
        const quantity = parseInt(item.querySelector(".input_row").value);

        orderDetails.push({
            name: productName,
            price: productPrice,
            quantity: quantity
        });
    });

    const existingOrderBills = JSON.parse(localStorage.getItem('order_bills')) || [];

    // Extract existing order codes
    const existingOrderCodes = existingOrderBills.map(orderBill => orderBill.orderCode);

    const orderBill = {
        orderCode: generateOrderCode(existingOrderCodes),
        userCode: currentUser.accountcode,
        orderDetails: orderDetails,
        orderTime: getCurrentTime(),
        orderStatus: 'Đang chờ xử lý' // Default status
    };
    existingOrderBills.push(orderBill);
    localStorage.setItem('order_bills', JSON.stringify(existingOrderBills));

    alert("Đơn hàng đã được chốt thành công!");

    // Clear the cart
    clearCart();

    location.reload();

}

// Function to generate the order code
function generateOrderCode(existingOrderCodes) {
    const lastOrderCode = existingOrderCodes.length > 0 ? existingOrderCodes[existingOrderCodes.length - 1] : 'DN00';
    const lastNumber = parseInt(lastOrderCode.substring(2));
    const newNumber = lastNumber + 1;

    if (newNumber > 99) {
        console.error('Order code exceeded the maximum limit.');
        return null;
    }

    const newNumberString = ('0' + newNumber).slice(-2);
    const newOrderCode = 'DN' + newNumberString;

    return newOrderCode;
}

function getCurrentTime() {
    // This function returns the current time in the format DD/MM/YYYY HH:mm:ss
    const now = new Date();
    const day = now.getDate().toString().padStart(2, '0');
    const month = (now.getMonth() + 1).toString().padStart(2, '0');
    const year = now.getFullYear();
    const hours = now.getHours().toString().padStart(2, '0');
    const minutes = now.getMinutes().toString().padStart(2, '0');
    const seconds = now.getSeconds().toString().padStart(2, '0');

    return `${day}/${month}/${year} ${hours}:${minutes}:${seconds}`;
}
function clearCart() {
    const cartBody = document.querySelector("tbody");
    cartBody.innerHTML = "";


    // Cập nhật tổng tiền (nếu cần)
    updateTotalPrice();
}

function updateTotalPrice() {
    const totalPriceElement = document.querySelector(".price-total span");
    const cartItems = document.querySelectorAll("tbody tr");
    let totalPrice = 0;

    cartItems.forEach(function (item) {
        const productPrice = parseFloat(item.querySelector(".prices").innerText.replace("đ", "").replace(",", ""));
        const quantity = parseInt(item.querySelector(".input_row").value);

        totalPrice += productPrice * quantity;
    });

    totalPriceElement.innerText = totalPrice.toLocaleString();
}

// Cập nhật giỏ hàng khi thêm sản phẩm vào giỏ
// Đoạn mã này phải được thực hiện khi người dùng thêm sản phẩm vào giỏ hàng
// Ví dụ: khi nhấn nút "Thêm vào giỏ hàng"
function updateCart(productName, productPrice, quantity) {
    const cartBody = document.querySelector("tbody");
    const row = document.createElement("tr");

    // Tên sản phẩm
    const nameCell = document.createElement("td");
    nameCell.innerText = productName;
    row.appendChild(nameCell);

    // Giá sản phẩm
    const priceCell = document.createElement("td");
    priceCell.innerText = productPrice.toLocaleString() + "đ";
    row.appendChild(priceCell);

    // Số lượng
    const quantityCell = document.createElement("td");
    quantityCell.innerText = quantity;
    row.appendChild(quantityCell);

    // Nút xóa
    const deleteCell = document.createElement("td");
    deleteCell.innerHTML = '<button>Xóa</button>';
    deleteCell.querySelector("button").addEventListener('click', function () {
        // Xử lý sự kiện xóa sản phẩm khỏi giỏ hàng
        // ...

        // Sau khi xóa, cập nhật lại giỏ hàng và tổng tiền
        updateTotalPrice();
    });
    row.appendChild(deleteCell);

    cartBody.appendChild(row);

    // Cập nhật tổng tiền
    updateTotalPrice();
}

const purchaseButton = document.querySelector(".purchase-button");
purchaseButton.addEventListener('click', handlePurchaseButtonClick);




////////////////////////////////////////////////User Xem lại đơn hàng////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

function showUserInfo() {
    // Lấy thông tin người dùng hiện tại từ localStorage
    const currentUser = getCurrentUser();
    // Hiển thị thông tin người dùng trên trang
    const nameElement = document.querySelector('.user-infor-name');
    const idElement = document.querySelector('.user-infor-id');
    const phoneNumElement = document.querySelector('.user-infor-phone-nums');
    const emailElement = document.querySelector('.user-infor-email');

    nameElement.textContent = `Tên khách hàng: ${currentUser.name}`;
    idElement.textContent = `Mã khách hàng: ${currentUser.accountcode}`;
    phoneNumElement.textContent = `Số điện thoại: ${currentUser.phone_num}`;
    emailElement.textContent = `Địa chỉ Email: ${currentUser.email}`;
}





// Lấy thông tin người dùng hiện tại từ localStorage
function showUserOrders() {
    var curren_tUser = getCurrentUser();

    // Lấy danh sách đơn hàng từ localStorage
    const orderBills = JSON.parse(localStorage.getItem('order_bills')) || [];

    // Hiển thị danh sách đơn hàng trên trang
    const orderTableBody = document.getElementById('orderTableBody');

    for (var i = 0; i < orderBills.length; i++) {
        var order = orderBills[i];

        if (order.userCode === curren_tUser.accountcode) {
            var row = document.createElement('tr');
            row.innerHTML = `
            <td style="border-right: 1px solid black;">${order.orderCode}</td>
            <td style="border-right: 1px solid black;">${order.userCode}</td>
            <td style="text-align:left;border-top:1px solid black;border-right: 1px solid black;padding:5px 0px;">
                <button class="details-button">Chi tiết đơn hàng</button>
            </td>
            <td style="border-right: 1px solid black;">${order.orderTime}</td>
            <td>${order.orderStatus}</td>
        `;

            // Thêm sự kiện click cho nút "Chi tiết đơn hàng"
            var detailsButton = row.querySelector('.details-button');
            detailsButton.addEventListener('click', function () {
                // Sử dụng hàm showOrderDetails với tham số là index và userCode
                showOrderDetails(curren_tUser.accountcode);
            });

            orderTableBody.appendChild(row);
        }
    }
}



function showOrderDetails(userCode) {
    const orderBills = JSON.parse(localStorage.getItem('order_bills')) || [];

    // Tìm đơn hàng mà userCode trùng khớp
    const order = orderBills.find(order => order.userCode === userCode);

    if (order) {
        const detailsDiv = document.createElement('div');
        detailsDiv.classList.add('details-container');
        detailsDiv.style.position = 'fixed';
        detailsDiv.style.top = '50%';
        detailsDiv.style.left = '50%';
        detailsDiv.style.transform = 'translate(-50%, -50%)';
        detailsDiv.style.backgroundColor = '#fff';
        detailsDiv.style.boxShadow = '0 0 10px rgba(0, 0, 0, 0.2)';
        detailsDiv.style.padding = '20px';
        detailsDiv.style.zIndex = '1000';
        detailsDiv.style.maxWidth = '80%';

        const closeButton = document.createElement('button');
        closeButton.classList.add('close-button');
        closeButton.innerHTML = '<i class="fa-solid fa-xmark"></i>';
        closeButton.style.position = 'absolute';
        closeButton.style.top = '5px';
        closeButton.style.right = '5px';
        closeButton.style.cursor = 'pointer';
        closeButton.addEventListener('click', function () {
            detailsDiv.style.display = 'none';
        });

        detailsDiv.appendChild(closeButton);

        const detailsTable = document.createElement('table');
        detailsTable.style.width = '100%';
        detailsTable.style.borderCollapse = 'collapse';
        detailsTable.style.border = '1px solid #ddd';

        detailsTable.innerHTML = `
            <thead>
                <tr>
                    <th style="border: 1px solid #ddd; padding: 8px;">Sản phẩm</th>
                    <th style="border: 1px solid #ddd; padding: 8px;">Số lượng</th>
                    <th style="border: 1px solid #ddd; padding: 8px 10px;">Giá</th>
                </tr>
            </thead>
            <tbody>
                ${order.orderDetails.map(detail => `
                    <tr>
                        <td style="border: 1px solid #ddd; padding: 8px;">${detail.name}</td>
                        <td style="border: 1px solid #ddd; padding: 8px;">${detail.quantity}</td>
                        <td style="border: 1px solid #ddd; padding: 8px;">${detail.price * detail.quantity}0.000  đ</td>
                    </tr>
                `).join('')}
                <tr>
                    <td colspan="2" style="border: 1px solid #ddd; text-align: right; padding: 8px;">Tổng giá:</td>
                    <td style="border: 1px solid #ddd; padding: 8px;">${calculateTotalPrice(order.orderDetails)}0.000  đ</td>
                </tr>
            </tbody>
        `;

        detailsDiv.appendChild(detailsTable);
        document.body.appendChild(detailsDiv);
        detailsDiv.style.zIndex = '1000';
        detailsDiv.style.display = 'block';
    } else {
        console.log('Không thể hiển thị chi tiết đơn hàng.');
    }
}

function calculateTotalPrice(orderDetails) {
    const totalPrice = orderDetails.reduce((total, detail) => total + detail.price * detail.quantity, 0);

    // Round the total price to 3 decimal places (adjust as needed)
    const roundedTotalPrice = Number(totalPrice.toFixed(3));

    return roundedTotalPrice;
}









////////////////////////////////////////////////////////////////////
//////////////////////XỬ LÍ ĐĂNG XUẤT ĐĂNG NHẬP////////////////////

//////////////////////admin.///////////////////////////
window.addEventListener("storage", function (event) {
    event.storageArea === this.localStorage
    // if () {
    //     for (let i = 0; i < window.data.length; i++) {
    //         localStorage.setItem(i, JSON.stringify(window.data[i]));
    //         product_data_local[i] = JSON.parse(localStorage.getItem(i));
    //     }
    //     render();
    // }
})

// function DisplatInf(){
//     var uinfo = document.querySelector(".page__infor-users");
//     uinfo.style.display = 'block';
// }
// function OffInfo(){
//     var uinfo = document.querySelector(".page__infor-users");
//     uinfo.style.display = 'none';
// }


